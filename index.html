<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ë–û–ú–ñ-–†–ü–ì</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .game-card { background: #222; border: 3px solid #444; border-radius: 15px; width: 320px; margin: 0 auto; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        
        /* –ü–æ–ª–æ—Å–∫–∏ –∂–∏–∑–Ω–∏ */
        .bar-bg { width: 100%; height: 20px; background: #444; border-radius: 10px; margin: 10px 0; border: 1px solid #000; overflow: hidden; }
        .bar-fill-red { height: 100%; background: #ff4444; width: 100%; transition: 0.1s; }
        .bar-fill-blue { height: 100%; background: #0088ff; width: 100%; transition: 0.3s; }

        .enemy-icon { font-size: 80px; margin: 20px 0; transition: 0.1s; }
        
        /* –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
        .hit-btn { 
            background: #ffcc00; color: black; border: none; padding: 15px 0; width: 100%; 
            font-size: 22px; font-weight: bold; border-radius: 10px; cursor: pointer;
            box-shadow: 0 4px 0 #b38f00;
        }
        .hit-btn:active { transform: translateY(4px); box-shadow: none; }

        .stats { display: flex; justify-content: space-around; margin: 20px 0; font-size: 18px; color: #00ff88; }
        
        .shop-box { border-top: 1px solid #444; padding-top: 15px; text-align: left; }
        .buy-btn { 
            width: 100%; padding: 10px; margin: 5px 0; cursor: pointer; 
            background: #333; color: white; border: 1px solid #555; border-radius: 5px;
            display: flex; justify-content: space-between;
        }
        .buy-btn:hover:not(:disabled) { background: #444; border-color: #00ff88; }
        .buy-btn:disabled { opacity: 0.4; cursor: not-allowed; }
    </style>
</head>
<body>

    <div class="game-card">
        <div id="enemy-name" style="color: #ff4444; font-weight: bold;">–î–í–û–†–ù–ò–ö (–£—Ä. 1)</div>
        <div id="enemy-sprite" class="enemy-icon">üßπ</div>
        
        <div style="font-size: 12px;">–ñ–∏–∑–Ω—å –≤—Ä–∞–≥–∞:</div>
        <div class="bar-bg"><div id="enemy-hp-fill" class="bar-fill-red"></div></div>

        <button class="hit-btn" onclick="doHit()">–£–î–ê–†–ò–¢–¨!</button>

        <div class="stats">
            <div>üçæ <span id="money">0</span></div>
            <div>üí™ <span id="dmg">2</span></div>
        </div>

        <div style="font-size: 12px;">–¢–≤–æ—è –∂–∏–∑–Ω—å:</div>
        <div class="bar-bg"><div id="player-hp-fill" class="bar-fill-blue"></div></div>

        <div class="shop-box">
            <button id="btn-wep" class="buy-btn" onclick="buyWeapon()">
                <span>ü•ä –ü–µ—Ä—á–∞—Ç–∫–∏ (+3 —É—Ä–æ–Ω–∞)</span> <b>20 üçæ</b>
            </button>
            <button id="btn-heal" class="buy-btn" onclick="buyHeal()">
                <span>ü•ô –®–∞—É—Ä–º–∞ (–•–∏–ª)</span> <b>10 üçæ</b>
            </button>
        </div>
    </div>

<script>
    // –ë–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    let bottles = 0;
    let myDmg = 2;
    let myHP = 100;
    
    let currentEnemyLvl = 0;
    const enemies = [
        {name: "–î–í–û–†–ù–ò–ö", icon: "üßπ", hp: 15, dmg: 3},
        {name: "–ö–£–†–¨–ï–†", icon: "üì¶", hp: 50, dmg: 7},
        {name: "–û–•–†–ê–ù–ù–ò–ö", icon: "üî¶", hp: 120, dmg: 12},
        {name: "–ú–ï–ù–¢", icon: "üëÆ", hp: 300, dmg: 20}
    ];

    let enemyMaxHP = enemies[0].hp;
    let enemyCurHP = enemyMaxHP;

    // –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞—Ä–∞
    function doHit() {
        // –£—Ä–æ–Ω –≤—Ä–∞–≥—É
        enemyCurHP -= myDmg;
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞–≥–∞
        const sprite = document.getElementById('enemy-sprite');
        sprite.style.transform = "scale(0.8) rotate(10deg)";
        setTimeout(() => sprite.style.transform = "scale(1) rotate(0deg)", 100);

        if (enemyCurHP <= 0) {
            bottles += (currentEnemyLvl + 1) * 10;
            spawnNextEnemy();
        }
        refreshUI();
    }

    // –í—Ä–∞–≥ –±—å–µ—Ç —Ç–µ–±—è —Ä–∞–∑ –≤ 1.5 —Å–µ–∫—É–Ω–¥—ã
    setInterval(() => {
        if (enemyCurHP > 0) {
            myHP -= enemies[currentEnemyLvl].dmg;
            if (myHP <= 0) {
                alert("–¢–µ–±—è –≤—ã—Ä—É–±–∏–ª–∏! –¢—ã –ø–æ—Ç–µ—Ä—è–ª —á–∞—Å—Ç—å –±—É—Ç—ã–ª–æ–∫.");
                bottles = Math.floor(bottles / 2);
                myHP = 100;
                currentEnemyLvl = 0;
                spawnNextEnemy();
            }
            refreshUI();
        }
    }, 1500);

    function spawnNextEnemy() {
        currentEnemyLvl++;
        if (currentEnemyLvl >= enemies.length) {
            alert("–¢–´ –ö–û–†–û–õ–¨ –†–ê–ô–û–ù–ê! –í—Å–µ—Ö –ø–æ–±–µ–¥–∏–ª.");
            currentEnemyLvl = 0;
            myDmg += 5; // –ë–æ–Ω—É—Å –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ
        }
        enemyMaxHP = enemies[currentEnemyLvl].hp;
        enemyCurHP = enemyMaxHP;
        document.getElementById('enemy-sprite').innerText = enemies[currentEnemyLvl].icon;
        document.getElementById('enemy-name').innerText = enemies[currentEnemyLvl].name + " (–£—Ä. " + (currentEnemyLvl+1) + ")";
    }

    function buyWeapon() {
        if (bottles >= 20) {
            bottles -= 20;
            myDmg += 3;
            refreshUI();
        }
    }

    function buyHeal() {
        if (bottles >= 10) {
            bottles -= 10;
            myHP = 100;
            refreshUI();
        }
    }

    function refreshUI() {
        document.getElementById('money').innerText = bottles;
        document.getElementById('dmg').innerText = myDmg;
        
        // –ü–æ–ª–æ—Å–∫–∏
        document.getElementById('enemy-hp-fill').style.width = Math.max(0, (enemyCurHP / enemyMaxHP) * 100) + "%";
        document.getElementById('player-hp-fill').style.width = Math.max(0, (myHP / 100) * 100) + "%";

        // –ö–Ω–æ–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
        document.getElementById('btn-wep').disabled = (bottles < 20);
        document.getElementById('btn-heal').disabled = (bottles < 10);
    }

    // –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
    refreshUI();
</script>

</body>
</html>
