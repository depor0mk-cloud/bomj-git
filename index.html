<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>ZOMBIE APOCALYPSE: BALANCED</title>
    <style>
        body { background: #0a0a0a; color: #eee; font-family: 'Segoe UI', sans-serif; text-align: center; user-select: none; }
        .game-window { background: #1a1a1a; border: 3px solid #444; border-radius: 20px; width: 350px; margin: 10px auto; padding: 15px; box-shadow: 0 0 25px rgba(255,0,0,0.3); }
        .header { font-size: 22px; color: #ff4444; font-weight: bold; text-transform: uppercase; margin-bottom: 10px; }
        
        .zombie-box { background: #222; border-radius: 15px; padding: 10px; border: 1px solid #333; margin-bottom: 15px; }
        .zombie-icon { font-size: 80px; height: 100px; display: flex; align-items: center; justify-content: center; }
        
        .bar { width: 100%; height: 14px; background: #333; border-radius: 7px; overflow: hidden; margin: 5px 0; border: 1px solid #000; }
        .fill-red { height: 100%; background: linear-gradient(90deg, #ff0000, #990000); width: 100%; transition: 0.05s; }
        .fill-blue { height: 100%; background: linear-gradient(90deg, #0088ff, #0044ff); width: 100%; }

        .hit-btn { 
            background: linear-gradient(#ff4444, #660000); color: white; border: none; padding: 15px; width: 100%; 
            font-size: 24px; font-weight: bold; border-radius: 12px; cursor: pointer;
            box-shadow: 0 5px 0 #330000; margin-bottom: 15px;
        }
        .hit-btn:active { transform: translateY(3px); box-shadow: none; }

        .stats { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 15px; }
        .stat-item { background: #252525; padding: 8px; border-radius: 8px; font-size: 13px; }
        .stat-item b { color: #00ff88; font-size: 16px; display: block; }

        .shop { text-align: left; background: #222; padding: 10px; border-radius: 10px; border: 1px solid #333; }
        .shop-btn { 
            width: 100%; padding: 8px; margin: 4px 0; cursor: pointer; 
            background: #333; color: white; border: 1px solid #555; border-radius: 6px;
            display: flex; justify-content: space-between; font-size: 13px;
        }
        .shop-btn:disabled { opacity: 0.3; }
        .prestige { background: #ffaa00 !important; color: black; font-weight: bold; margin-top: 10px; box-shadow: 0 4px 0 #996600; }
    </style>
</head>
<body>

<div class="game-window">
    <div class="header">ZOMBIE SMASH</div>
    
    <div class="zombie-box">
        <div id="z-name" style="color: #ff4444; font-size: 14px; font-weight: bold;">–ó–æ–º–±–∏-–°–ª–∞–±–∞–∫</div>
        <div id="z-icon" class="zombie-icon">üßü</div>
        <div class="bar"><div id="z-hp" class="fill-red"></div></div>
    </div>

    <button class="hit-btn" onmousedown="hit()">–£–î–ê–†–ò–¢–¨!</button>

    <div class="stats">
        <div class="stat-item">üçæ –ë—É—Ç—ã–ª–∫–∏ <b id="m-money">0</b></div>
        <div class="stat-item">üí™ –£—Ä–æ–Ω <b id="m-dmg">2</b></div>
        <div class="stat-item">‚ö° –ú–Ω–æ–∂. <b id="m-mult">x1</b></div>
        <div class="stat-item">‚ù§Ô∏è –¢–≤–æ—ë HP <div class="bar" style="height:6px;"><div id="p-hp" class="fill-blue"></div></div></div>
    </div>

    <div class="shop">
        <button id="s-wep" class="shop-btn" onclick="buy('wep')"><span>ü•ä –ö–∞—Å—Ç–µ—Ç (+8 —É—Ä–æ–Ω)</span> <b id="c-wep">30</b></button>
        <button id="s-auto" class="shop-btn" onclick="buy('auto')"><span>ü§ù –ö–æ—Ä–µ—à (–ê–≤—Ç–æ-—É–¥–∞—Ä)</span> <b id="c-auto">100</b></button>
        <button id="s-heal" class="shop-btn" onclick="buy('heal')"><span>ü•ô –®–∞—É—Ä–º–∞ (–•–∏–ª)</span> <b>15</b></button>
        <button id="s-prestige" class="shop-btn prestige" onclick="prestige()" style="display:none;">–ü–ï–†–ï–†–û–ñ–î–ï–ù–ò–ï (x2 –ë–û–ù–£–°)</button>
    </div>
</div>

<script>
    let state = JSON.parse(localStorage.getItem('zombie_v3_save')) || {
        money: 0, dmg: 2, mult: 1, auto: 0, lvl: 1, cWep: 30, cAuto: 100
    };

    let pHP = 100, zHP = 15, zMax = 15, zDmg = 1;
    
    // 50+ –†–ê–ó–ù–´–• –ó–û–ú–ë–ò –ò –ú–û–ù–°–¢–†–û–í
    const zIcons = ["üßü","üßõ","üßü‚Äç‚ôÇÔ∏è","üßü‚Äç‚ôÄÔ∏è","üíÄ","‚ò†Ô∏è","üëª","üëΩ","üëπ","üë∫","üéÉ","ü§°","üëΩ","üëæ","ü§ñ","üïµÔ∏è‚Äç‚ôÇÔ∏è","üßõ‚Äç‚ôÇÔ∏è","üßõ‚Äç‚ôÄÔ∏è","üßü","üßü‚Äç‚ôÇÔ∏è","üßü‚Äç‚ôÄÔ∏è","üß†","ü¶ü","üï∑Ô∏è","ü¶Ç","üêÄ","üê∫","üêó","ü¶ç","üêâ","üê≤","üêä","üêç","üï¥Ô∏è","ü§∫","ü¶æ","ü¶ø","üë£","üïØÔ∏è","ü©∏","üß™","‚ò£Ô∏è","‚ò¢Ô∏è","üåã","üåë","üßø","üîÆ","üë∫","ü¶π","üé≠"];

    // –í—Ä–∞–≥ –∞—Ç–∞–∫—É–µ—Ç (–î–ï–ë–ê–§–§: –£–†–û–ù –†–ê–°–¢–ï–¢ –ú–ï–î–õ–ï–ù–ù–ï–ï)
    setInterval(() => {
        pHP -= zDmg;
        // –ê–≤—Ç–æ-—Ö–∏–ª –µ—Å–ª–∏ –º–∞–ª–æ –•–ü –∏ –µ—Å—Ç—å –¥–µ–Ω—å–≥–∏
        if (pHP < 20 && state.money >= 15) buy('heal');
        
        if (pHP <= 0) {
            alert("–¢–µ–±—è –∑–∞–≥—Ä—ã–∑–ª–∏! –ü–æ—Ç–µ—Ä—è–ª 10% –±—É—Ç—ã–ª–æ–∫.");
            state.money *= 0.9; pHP = 100;
        }
        ui();
    }, 1500);

    // –ê–≤—Ç–æ-—É–¥–∞—Ä
    setInterval(() => { if (state.auto > 0) damage(state.auto * state.mult); }, 1000);

    function hit() {
        damage(state.dmg * state.mult);
        let s = document.getElementById('z-icon');
        s.style.transform = "scale(0.8) rotate(5deg)";
        setTimeout(() => s.style.transform = "scale(1) rotate(0deg)", 30);
    }

    function damage(val) {
        zHP -= val;
        if (zHP <= 0) {
            state.money += Math.ceil(state.lvl * 8 * state.mult);
            state.lvl++;
            newZombie();
        }
        ui();
    }

    function newZombie() {
        // –î–ï–ë–ê–§–§: –•–ü –ó–û–ú–ë–ò –†–ê–°–¢–ï–¢ –ú–ï–î–õ–ï–ù–ù–ï–ï (–±—ã–ª–æ 1.3, —Å—Ç–∞–ª–æ 1.18)
        zMax = Math.floor(15 * Math.pow(1.18, state.lvl));
        zHP = zMax;
        // –î–ï–ë–ê–§–§: –£–†–û–ù –ó–û–ú–ë–ò –†–ê–°–¢–ï–¢ –ú–ï–î–õ–ï–ù–ù–ï–ï (–±—ã–ª–æ 1.2, —Å—Ç–∞–ª–æ 1.1)
        zDmg = Math.max(1, Math.floor(1 * Math.pow(1.1, state.lvl)));
        
        document.getElementById('z-icon').innerText = zIcons[state.lvl % zIcons.length];
        document.getElementById('z-name').innerText = "–ó–æ–º–±–∏ –£—Ä. " + state.lvl;
    }

    function buy(t) {
        if (t=='wep' && state.money >= state.cWep) {
            state.money -= state.cWep; state.dmg += 8; state.cWep = Math.round(state.cWep * 1.4);
        }
        if (t=='auto' && state.money >= state.cAuto) {
            state.money -= state.cAuto; state.auto += 3; state.cAuto = Math.round(state.cAuto * 1.6);
        }
        if (t=='heal' && state.money >= 15) {
            state.money -= 15; pHP = Math.min(100, pHP + 50);
        }
        ui();
    }

    function prestige() {
        if (state.money >= 1000) {
            state.mult++; state.money = 0; state.dmg = 2; state.auto = 0; state.lvl = 1;
            state.cWep = 30; state.cAuto = 100; pHP = 100;
            newZombie(); ui();
        }
    }

    function ui() {
        document.getElementById('m-money').innerText = Math.floor(state.money);
        document.getElementById('m-dmg').innerText = state.dmg;
        document.getElementById('m-mult').innerText = "x" + state.mult;
        document.getElementById('z-hp').style.width = (zHP/zMax*100) + "%";
        document.getElementById('p-hp').style.width = pHP + "%";
        document.getElementById('c-wep').innerText = state.cWep;
        document.getElementById('c-auto').innerText = state.cAuto;
        
        document.getElementById('s-wep').disabled = state.money < state.cWep;
        document.getElementById('s-auto').disabled = state.money < state.cAuto;
        document.getElementById('s-heal').disabled = state.money < 15;
        document.getElementById('s-prestige').style.display = state.money >= 1000 ? "flex" : "none";
        
        localStorage.setItem('zombie_v3_save', JSON.stringify(state));
    }

    newZombie();
    ui();
</script>
</body>
</html>
