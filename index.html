<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ë–û–ú–ñ-–†–ü–ì: –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨</title>
    <style>
        body { background: #121212; color: #e0e0e0; font-family: 'Courier New', monospace; text-align: center; padding: 10px; }
        .game-window { background: #1e1e1e; border: 4px solid #333; border-radius: 20px; width: 360px; margin: 0 auto; padding: 20px; box-shadow: 0 0 30px rgba(0,255,136,0.1); }
        
        .header { font-size: 24px; color: #00ff88; text-shadow: 0 0 10px #00ff88; margin-bottom: 10px; }
        .enemy-box { background: #252525; border-radius: 15px; padding: 15px; margin: 10px 0; border: 1px solid #444; }
        .enemy-icon { font-size: 70px; height: 90px; display: flex; align-items: center; justify-content: center; transition: 0.1s; }
        
        .bar { width: 100%; height: 15px; background: #333; border-radius: 10px; overflow: hidden; border: 1px solid #000; margin: 5px 0; }
        .fill-hp { height: 100%; background: linear-gradient(90deg, #ff416c, #ff4b2b); width: 100%; transition: 0.1s; }
        .fill-player { height: 100%; background: linear-gradient(90deg, #00d2ff, #3a7bd5); width: 100%; }

        .hit-btn { 
            background: #00ff88; color: #000; border: none; padding: 18px; width: 100%; 
            font-size: 22px; font-weight: bold; border-radius: 12px; cursor: pointer;
            box-shadow: 0 5px 0 #009955; margin-bottom: 15px;
        }
        .hit-btn:active { transform: translateY(4px); box-shadow: none; }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; font-size: 14px; }
        .stat-card { background: #2a2a2a; padding: 8px; border-radius: 8px; border: 1px solid #333; }
        .val { display: block; color: #00ff88; font-size: 18px; font-weight: bold; }

        .shop { text-align: left; background: #252525; padding: 10px; border-radius: 10px; }
        .shop-title { font-size: 12px; color: #888; margin-bottom: 5px; text-transform: uppercase; }
        .buy-btn { 
            width: 100%; padding: 10px; margin: 4px 0; cursor: pointer; 
            background: #333; color: white; border: 1px solid #555; border-radius: 6px;
            display: flex; justify-content: space-between; font-size: 13px;
        }
        .buy-btn:hover:not(:disabled) { border-color: #00ff88; background: #3a3a3a; }
        .buy-btn:disabled { opacity: 0.3; filter: grayscale(1); }

        .prestige-btn { background: #ff4444 !important; margin-top: 15px; color: white !important; box-shadow: 0 5px 0 #990000 !important; }
    </style>
</head>
<body>

<div class="game-window">
    <div class="header">BOMZH INFINITY</div>
    
    <div class="enemy-box">
        <div id="e-name" style="font-size: 14px; color: #ff4444;">–î–í–û–†–ù–ò–ö (–£–†. 1)</div>
        <div id="e-sprite" class="enemy-icon">üßπ</div>
        <div class="bar"><div id="e-hp-fill" class="fill-hp"></div></div>
    </div>

    <button class="hit-btn" onclick="doHit()">–£–î–ê–†–ò–¢–¨!</button>

    <div class="stats-grid">
        <div class="stat-card">–ë—É—Ç—ã–ª–∫–∏ <span id="m-bottles" class="val">0</span></div>
        <div class="stat-card">–£—Ä–æ–Ω <span id="m-dmg" class="val">2</span></div>
        <div class="stat-card">–ú–Ω–æ–∂–∏—Ç–µ–ª—å <span id="m-mult" class="val">x1</span></div>
        <div class="stat-card">–¢–≤–æ—ë –•–ü <div class="bar" style="height:8px"><div id="p-hp-fill" class="fill-player"></div></div></div>
    </div>

    <div class="shop">
        <div class="shop-title">–£–ª—É—á—à–µ–Ω–∏—è</div>
        <button id="b-wep" class="buy-btn" onclick="buy('wep')"><span>ü•ä –ö–∞—Å—Ç–µ—Ç (+5 —É—Ä–æ–Ω)</span> <b id="c-wep">30 üçæ</b></button>
        <button id="b-auto" class="buy-btn" onclick="buy('auto')"><span>ü§ù –ö–æ—Ä–µ—à (–ê–≤—Ç–æ-—É–¥–∞—Ä)</span> <b id="c-auto">100 üçæ</b></button>
        <button id="b-heal" class="buy-btn" onclick="buy('heal')"><span>ü•ô –®–∞—É—Ä–º–∞ (–•–∏–ª)</span> <b>15 üçæ</b></button>
        
        <button id="b-prestige" class="buy-btn prestige-btn" onclick="doPrestige()" style="display:none">
            <span>‚ò£Ô∏è –ü–ï–†–ï–†–û–ñ–î–ï–ù–ò–ï</span> <b>+1 –∫ –º–Ω–æ–∂–∏—Ç–µ–ª—é</b>
        </button>
    </div>
</div>

<script>
    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –î–ê–ù–ù–´–• (–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ø–∞–º—è—Ç–∏)
    let save = JSON.parse(localStorage.getItem('bomzh_infinity_save')) || {
        bottles: 0,
        dmg: 2,
        multiplier: 1,
        autoDmg: 0,
        lvl: 1,
        costWep: 30,
        costAuto: 100
    };

    let pMaxHP = 100;
    let pCurHP = 100;
    let eMaxHP = 15;
    let eCurHP = 15;
    let eDmg = 2;
    const icons = ["üßπ", "üì¶", "üî¶", "üëÆ", "ü•ä", "üëπ", "ü§°", "ü§ñ", "üè¢"];

    // –¢–∞–π–º–µ—Ä –≤—Ä–∞–≥–∞ (–±—å–µ—Ç —Ç–µ–±—è)
    setInterval(() => {
        pCurHP -= eDmg;
        if (pCurHP <= 0) {
            alert("–¢–µ–±—è –ø–æ–±–∏–ª–∏! –¢—ã –ø–æ—Ç–µ—Ä—è–ª 20% –±—É—Ç—ã–ª–æ–∫.");
            save.bottles = Math.floor(save.bottles * 0.8);
            pCurHP = pMaxHP;
        }
        updateUI();
    }, 1500);

    // –¢–∞–π–º–µ—Ä –∞–≤—Ç–æ-—É–¥–∞—Ä–∞ (–∫–æ—Ä–µ—à)
    setInterval(() => {
        if (save.autoDmg > 0) {
            dealDamage(save.autoDmg * save.multiplier);
        }
    }, 1000);

    function doHit() {
        dealDamage(save.dmg * save.multiplier);
        const s = document.getElementById('e-sprite');
        s.style.transform = "scale(0.8) translateY(10px)";
        setTimeout(() => s.style.transform = "none", 50);
    }

    function dealDamage(amount) {
        eCurHP -= amount;
        if (eCurHP <= 0) {
            save.bottles += Math.ceil(save.lvl * 5 * save.multiplier);
            save.lvl++;
            spawnEnemy();
        }
        updateUI();
    }

    function spawnEnemy() {
        eMaxHP = Math.floor(15 * Math.pow(1.3, save.lvl));
        eCurHP = eMaxHP;
        eDmg = Math.floor(2 * Math.pow(1.2, save.lvl));
        
        document.getElementById('e-name').innerText = `–í–†–ê–ì –£–†. ${save.lvl}`;
        document.getElementById('e-sprite').innerText = icons[save.lvl % icons.length];
    }

    function buy(type) {
        if (type === 'wep' && save.bottles >= save.costWep) {
            save.bottles -= save.costWep;
            save.dmg += 5;
            save.costWep = Math.floor(save.costWep * 1.5);
        }
        if (type === 'auto' && save.bottles >= save.costAuto) {
            save.bottles -= save.costAuto;
            save.autoDmg += 2;
            save.costAuto = Math.floor(save.costAuto * 1.7);
        }
        if (type === 'heal' && save.bottles >= 15) {
            save.bottles -= 15;
            pCurHP = pMaxHP;
        }
        updateUI();
    }

    function doPrestige() {
        if (confirm("–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è? –¢—ã –ø–æ—Ç–µ—Ä—è–µ—à—å –±—É—Ç—ã–ª–∫–∏ –∏ —É—Ä–æ–Ω, –Ω–æ –ø–æ–ª—É—á–∏—à—å –≤–µ—á–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å x" + (save.multiplier + 1))) {
            save.multiplier += 1;
            save.bottles = 0;
            save.dmg = 2;
            save.autoDmg = 0;
            save.lvl = 1;
            save.costWep = 30;
            save.costAuto = 100;
            pCurHP = pMaxHP;
            spawnEnemy();
            updateUI();
        }
    }

    function updateUI() {
        document.getElementById('m-bottles').innerText = Math.floor(save.bottles);
        document.getElementById('m-dmg').innerText = save.dmg;
        document.getElementById('m-mult').innerText = "x" + save.multiplier;
        
        document.getElementById('e-hp-fill').style.width = (eCurHP / eMaxHP * 100) + "%";
        document.getElementById('p-hp-fill').style.width = (pCurHP / pMaxHP * 100) + "%";

        document.getElementById('c-wep').innerText = save.costWep + " üçæ";
        document.getElementById('c-auto').innerText = save.costAuto + " üçæ";

        document.getElementById('b-wep').disabled = save.bottles < save.costWep;
        document.getElementById('b-auto').disabled = save.bottles < save.costAuto;
        document.getElementById('b-heal').disabled = save.bottles < 15;

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–µ—Å—Ç–∏–∂–∞, –µ—Å–ª–∏ –º–Ω–æ–≥–æ –±—É—Ç—ã–ª–æ–∫
        document.getElementById('b-prestige').style.display = save.bottles >= 500 ? "flex" : "none";

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage
        localStorage.setItem('bomzh_infinity_save', JSON.stringify(save));
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    spawnEnemy();
    updateUI();
</script>

</body>
</html>
